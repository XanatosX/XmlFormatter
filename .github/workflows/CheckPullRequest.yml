name: Check pull request

on: [pull_request]

jobs:   
   checkCorePlugin:
     name: Check core plugin build
     runs-on: windows-latest
     steps:
       - name: Clone repository
         uses: actions/checkout@v2
       - name: Install nuget
         uses: nuget/setup-nuget@v1
       - name: Nuget restore
         run: nuget restore
         shell: powershell
       - name: Setup msbuild
         uses: microsoft/setup-msbuild@v1.0.2
       - name: Switch folder
         run: cd src\CorePlugin
         shell: powershell
       - name: Build project
         run: msbuild /t:Build /p:Configuration=Release
         shell: powershell   
   checkJsonPlugin:
     name: Check json plugin build
     runs-on: windows-latest
     steps:
       - name: Clone repository
         uses: actions/checkout@v2
       - name: Install nuget
         uses: nuget/setup-nuget@v1
       - name: Nuget restore
         run: nuget restore
         shell: powershell
       - name: Setup msbuild
         uses: microsoft/setup-msbuild@v1.0.2
       - name: Switch folder
         run: cd src\JsonPlugin
         shell: powershell
       - name: Build project
         run: msbuild /t:Build /p:Configuration=Release
         shell: powershell   
   checkPluginFramework:
     name: Check plugin framework build
     runs-on: windows-latest
     steps:
       - name: Clone repository
         uses: actions/checkout@v2
       - name: Install nuget
         uses: nuget/setup-nuget@v1
       - name: Nuget restore
         run: nuget restore
         shell: powershell
       - name: Setup msbuild
         uses: microsoft/setup-msbuild@v1.0.2
       - name: Switch folder
         run: cd src\PluginFramework
         shell: powershell
       - name: Build project
         run: msbuild /t:Build /p:Configuration=Release
         shell: powershell
   checkWinFormsBuild:
     name: Check windows forms build
     runs-on: windows-latest
     steps:
       - name: Clone repository
         uses: actions/checkout@v2
       - name: Install nuget
         uses: nuget/setup-nuget@v1
       - name: Nuget restore
         run: nuget restore
         shell: powershell
       - name: Setup msbuild
         uses: microsoft/setup-msbuild@v1.0.2
       - name: Switch folder
         run: cd src\XmlFormatter
         shell: powershell
       - name: Build project
         run: msbuild /t:Build /p:Configuration=Release
         shell: powershell
   checkFormatterModel:
     name: Check formatter model build
     runs-on: windows-latest
     steps:
       - name: Clone repository
         uses: actions/checkout@v2
       - name: Install nuget
         uses: nuget/setup-nuget@v1
       - name: Nuget restore
         run: nuget restore
         shell: powershell
       - name: Setup msbuild
         uses: microsoft/setup-msbuild@v1.0.2
       - name: Switch folder
         run: cd src\XmlFormatterModel
         shell: powershell
       - name: Build project
         run: msbuild /t:Build /p:Configuration=Release
         shell: powershell
   checkAvaloniaBuild:
     name: Check Avalonia build
     runs-on: windows-latest
     steps:
       - name: Clone repository
         uses: actions/checkout@v2
       - name: Install nuget
         uses: nuget/setup-nuget@v1
       - name: Nuget restore
         run: nuget restore
         shell: powershell
       - name: Setup msbuild
         uses: microsoft/setup-msbuild@v1.0.2
       - name: List folder
         run: dir
         shell: powershell
       - name: Switch folder
         run: cd src\XmlFormatterOsIndependent
         shell: powershell
       - name: List folder
         run: dir
         shell: powershell
       - name: Build project
         run: dotnet publish -c Release -r win-x64 --self-contained true
         shell: powershell
